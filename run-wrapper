membwcg -quota $1 -period $2 -cidfile /tmp/watch &> /tmp/membwcg.out &
if [ $? -ne 0 ] ; then
  echo "ERROR: when executing membwcg"
  cat /tmp/membwcg.out
  exit 1
fi

docker run --cidfile /tmp/watch ${@:3}
if [ $? -ne 0 ] ; then
  echo "ERROR: while executing docker"
  exit 1
fi

killall membwcg
